import os
from dotenv import load_dotenv
from werkzeug.security import generate_password_hash
from app import create_app
from database import IDatabaseConnection
from models import *

from repositories.subscription import SubscriptionRepository
from repositories.admin import AdminRepository
from repositories.user import UserRepository
from repositories.category import CategoryRepository
from repositories.author import AuthorRepository
from repositories.article import ArticleRepository
from repositories.comment import CommentRepository
from repositories.ad import AdRepository
from sqlalchemy.orm import Session

load_dotenv()
app = create_app(os.getenv("FLASK_CONFIG") or "default")


def clear_data(session: Session):
    """Видаляє всі дані з таблиць у правильному порядку."""
    print("Очищення бази даних...")
    session.query(ArticleInteraction).delete()
    session.query(Comment).delete()
    session.query(ArticleView).delete()
    session.query(AdView).delete()
    session.query(UserSubscriptionPlan).delete()
    session.query(Notification).delete()
    session.query(NewsletterSubscription).delete()

    session.query(Article).delete()
    session.query(Ad).delete()
    session.query(Author).delete()
    session.query(Category).delete()
    session.query(User).delete()
    session.query(Admin).delete()
    session.query(SubscriptionPlan).delete()

    session.commit()
    print("Базу даних очищено.")


def seed_database():
    """Наповнює базу даних початковими даними."""
    with app.app_context():
        db_session = app.container.resolve(IDatabaseConnection).get_session()

        clear_data(db_session)

        sub_repo = SubscriptionRepository(db_session)
        admin_repo = AdminRepository(db_session)
        user_repo = UserRepository(db_session)
        category_repo = CategoryRepository(db_session)
        author_repo = AuthorRepository(db_session)
        article_repo = ArticleRepository(db_session)
        comment_repo = CommentRepository(db_session)
        ad_repo = AdRepository(db_session)

        print("Створення планів підписок...")
        free_plan = sub_repo.create(
            {
                "name": "Безкоштовний",
                "permissions": {
                    "no_ads": False,
                    "exclusive_content": False,
                    "save_article": False,
                    "comment": True,
                },
                "price_per_month": 0.0,
                "description": "Доступ до публічних статей з рекламою.",
            }
        )
        premium_plan = sub_repo.create(
            {
                "name": "Преміум",
                "permissions": {
                    "no_ads": True,
                    "exclusive_content": True,
                    "save_article": True,
                    "comment": True,
                },
                "price_per_month": 9.99,
                "description": "Повний доступ до всього контенту без реклами.",
            }
        )
        print("Плани підписок створено.")

        # --- 2. Створення адміністратора ---
        print("Створення адміністратора...")
        admin_email = os.getenv("ADMIN_EMAIL", "admin@news.com")
        admin_password = os.getenv("ADMIN_PASSWORD", "admin")
        hashed_password = generate_password_hash(admin_password)
        admin_repo.create(
            {
                "email": admin_email,
                "password": hashed_password,
            }
        )
        print(
            f"Адміністратора створено (email: {admin_email}, пароль: {admin_password})."
        )

        # --- 3. Створення користувачів ---
        print("Створення користувачів...")
        generic_user_password = os.getenv("GENERIC_USER_PASSWORD", "user-password")
        hashed_user_password = generate_password_hash(generic_user_password)

        premium_user = user_repo.create(
            {
                "email": "premium@news.com",
                "username": "PremiumUser",
                "password": hashed_user_password,
            }
        )
        free_user = user_repo.create(
            {
                "email": "free@news.com",
                "username": "FreeUser",
                "password": hashed_user_password,
            }
        )
        print("Користувачів створено.")
        print(
            f"\tПароль для користувачів: {generic_user_password}\n\tEmails: free@news.com, premium@news.com"
        )

        # --- 4. Призначення підписок ---
        sub_repo.subscribe_user(user_id=premium_user.id, plan_id=premium_plan.id)
        sub_repo.subscribe_user(user_id=free_user.id, plan_id=free_plan.id)
        print("Підписки призначено.")

        # --- 5. Створення категорій та авторів ---
        print("Створення категорій та авторів...")
        cat_politics = category_repo.create(
            {
                "name": "Політика",
                "description": "Новини та аналітика політичного життя.",
                "slug": "politika",
            }
        )
        cat_tech = category_repo.create(
            {"name": "Технології", "description": "Огляди гаджетів та новини IT.", "slug": "tehnologii"}
        )
        cat_sport = category_repo.create(
            {"name": "Спорт", "description": "Найважливіші спортивні події.", "slug": "sport"}
        )
        cat_economy = category_repo.create(
            {"name": "Економіка", "description": "Все про фінанси та бізнес.", "slug": "ekonomika"}
        )
        cat_culture = category_repo.create(
            {"name": "Культура", "description": "Мистецтво, кіно та музика.", "slug": "kultura"}
        )
        cat_travel = category_repo.create(
            {"name": "Подорожі", "description": "Ідеї для ваших майбутніх мандрівок.", "slug": "podorozhi"}
        )

        author1 = author_repo.create(
            {
                "first_name": "Олена",
                "last_name": "Петренко",
                "bio": "Головний політичний оглядач.",
            }
        )
        author2 = author_repo.create(
            {
                "first_name": "Максим",
                "last_name": "Ковальчук",
                "bio": "Експерт з ринкових технологій.",
            }
        )
        author3 = author_repo.create(
            {
                "first_name": "Ірина",
                "last_name": "Шевченко",
                "bio": "Спортивний журналіст.",
            }
        )
        author4 = author_repo.create(
            {
                "first_name": "Андрій",
                "last_name": "Захарчук",
                "bio": "Фінансовий аналітик.",
            }
        )
        author5 = author_repo.create(
            {
                "first_name": "Софія",
                "last_name": "Мельник",
                "bio": "Мистецтвознавець та тревел-блогер.",
            }
        )
        print("Категорії та автори створені.")

        # --- 6. Створення статей ---
        print("Створення статей...")

        # --- ВЕЛИКА СТАТТЯ 1 ---
        article1 = article_repo.create(
            {
                "author_id": author1.id,
                "category_id": cat_politics.id,
                "title": "Нові політичні альянси: що очікувати у наступному десятилітті?",
                "content": """
                    <p><strong>Останні тижні відзначилися значними змінами на політичній арені. Експерти аналізують формування нових коаліцій та можливі наслідки для міжнародної стабільності. Це не просто тимчасові угоди, а тектонічні зсуви, що визначатимуть геополітику на роки вперед.</strong></p>
                    
                    <p>Ключові гравці, що роками дотримувалися політики нейтралітету або конкурували між собою, несподівано оголосили про спільні ініціативи. Це може свідчити про глибоку перебудову глобального ландшафту. Детальний аналіз останніх подій показує, що ці альянси не є тимчасовими, а мають на меті довгострокову співпрацю у сферах економіки, безпеки та технологічного розвитку.</p>
                    
                    <h2>Нова вісь: Економіка та Безпека</h2>
                    <p>В основі нового об'єднання лежить прагнення до економічної самодостатності та спільного захисту від зовнішніх загроз. Угоди, підписані минулого тижня, охоплюють широкий спектр питань, від торгівлі до кібербезпеки.</p>
                    
                    <h3>Основні пункти угоди:</h3>
                    <ul>
                        <li><strong>Спільна оборонна стратегія:</strong> Включає регулярні спільні військові навчання, обмін розвідданими та розробку спільних систем ППО.</li>
                        <li><strong>Зона вільної торгівлі:</strong> Поступове скасування митних зборів та спрощення процедур для бізнесу.</li>
                        <li><strong>Енергетичний союз:</strong> Координація у сфері енергетичної безпеки, будівництво нових інфраструктурних проєктів для диверсифікації постачання.</li>
                        <li><strong>Технологічний альянс:</strong> Спільні дослідження у сферах ШІ, біотехнологій та напівпровідників.</li>
                    </ul>
                    
                    <h2>Реакція світу та потенційні ризики</h2>
                    <p>Формування такого потужного блоку неминуче викликає занепокоєння у інших світових гравців. Представники традиційних альянсів вже висловили "глибоку стурбованість" щодо можливого порушення балансу сил. Наші аналітики вважають, що це може призвести як до посилення регіональної стабільності, так і до нових викликів.</p>
                    
                    <blockquote>"Ми входимо в еру 'багатополярного хаосу'. Старі правила більше не працюють, а нові ще не написані. Цей альянс - спроба створити один з нових полюсів впливу", - коментує відомий політолог Іван Грабовський.</blockquote>
                    
                    <p>Потенційні ризики включають нову "холодну війну", але цього разу не ідеологічну, а технологічну та економічну. Країни, що не увійшли до альянсу, можуть опинитися перед складним вибором: приєднатися до одного з блоків чи спробувати зберегти нейтралітет у світі, що стрімко поляризується.</p>
                    
                    <h2>Що це означає для нас?</h2>
                    <p>Для нашої країни це створює унікальне вікно можливостей, але й несе серйозні загрози. З одного боку, ми можемо виграти від посилення регіональної безпеки та нових економічних зв'язків. З іншого - є ризик опинитися "буферною зоною" між двома конкуруючими блоками.</p>
                    <p>Уряду доведеться проявити неабияку дипломатичну гнучкість, щоб маневрувати у нових реаліях та захистити національні інтереси. Найближчі місяці покажуть, чи зможемо ми скористатися цією ситуацією, чи станемо її заручниками.</p>
                """,
                "status": "published",
                "is_breaking": True,
                "views_count": 1520,
            }
        )

        # --- ВЕЛИКА СТАТТЯ 2 ---
        article2 = article_repo.create(
            {
                "author_id": author2.id,
                "category_id": cat_tech.id,
                "title": "Майбутнє ШІ: ексклюзивний аналіз та прогнози від інсайдерів",
                "content": """
                    <p><strong>Ця стаття доступна лише для преміум-підписників. Оформіть підписку, щоб отримати повний доступ до ексклюзивних матеріалів та підтримати незалежну журналістику.</strong></p>
                    
                    <p>Штучний інтелект розвивається з неймовірною швидкістю. Ще п'ять років тому генеративні моделі були іграшкою для ентузіастів. Сьогодні вони пишуть код, створюють фотореалістичні зображення та загрожують змінити цілі індустрії. Ми поспілкувалися з провідними дослідниками галузі, засновниками стартапів та венчурними капіталістами, щоб зрозуміти, які технології визначатимуть наше майбутнє у найближчі п'ять років.</p>
                    
                    <h2>Від генерації до дії: нове покоління ШІ</h2>
                    <p>Якщо останній рік пройшов під знаком "великих мовних моделей" (LLM), то наступний етап – це "автономні агенти". Це системи, здатні не просто відповідати на запити, а самостійно ставити цілі, планувати та виконувати складні багатоетапні завдання.</p>
                    
                    <p>"Уявіть, що ви даєте ШІ-агенту завдання: 'Досліди ринок сонячних панелей у Східній Європі та підготуй бізнес-план'. Агент самостійно проаналізує конкурентів, знайде статистику, складе фінансову модель і напише 50-сторінковий звіт. Це не наукова фантастика, це те, над чим ми працюємо прямо зараз", - ділиться інсайдер з однієї з провідних лабораторій (ім'я не розголошується).</p>
                    
                    <h3>Ключові тренди 2025-2030:</h3>
                    <ol>
                        <li><strong>Автономні агенти:</strong> Системи, що самостійно виконують складні завдання, взаємодіючи з програмним забезпеченням та інтернетом.</li>
                        <li><strong>Мультимодальність "з коробки":</strong> ШІ, що одночасно і нативно розуміє текст, зображення, звук, відео та навіть 3D-моделі. Це відкриє шлях до справжніх "розумних" помічників.</li>
                        <li><strong>Пояснюваний ШІ (XAI):</strong> З ростом впливу ШІ на медицину та фінанси, критично важливим стає розвиток моделей, чиї рішення можна буде зрозуміти, перевірити та оскаржити.</li>
                        <li><strong>ШІ на пристроях (On-device AI):</strong> Перенесення потужних моделей з хмари безпосередньо на ваш смартфон чи ноутбук. Це підвищить швидкість та конфіденційність.</li>
                    </ol>
                    
                    <h2>Економічний та соціальний вплив</h2>
                    <p>За даними нашого аналізу, найбільший вплив ШІ матиме на наступні сектори:</p>
                    <ul>
                        <li><strong>Охорона здоров'я:</strong> Персоналізована діагностика, відкриття нових ліків.</li>
                        <li><strong>Освіта:</strong> Адаптивні навчальні плани для кожного учня.</li>
                        <li><strong>Креативні індустрії:</strong> Автоматизація дизайну, написання музики, створення візуальних ефектів.</li>
                    </ul>
                    
                    <p>Разом з тим, залишаються відкритими питання регуляції, етики та масового заміщення робочих місць. Ексклюзивні коментарі засновників провідних ШІ-стартапів та детальний аналіз ризиків читайте у повній версії статті, доступній лише для наших преміум-підписників.</p>
                """,
                "status": "published",
                "is_exclusive": True,
                "is_breaking": True,
                "views_count": 2800,
            }
        )
        article3 = article_repo.create(
            {
                "author_id": author3.id,
                "category_id": cat_sport.id,
                "title": "Історична перемога у фіналі Чемпіонату Світу з футболу",
                "content": """
                    <p>Це був вечір, який увійде в історію. Національна збірна здобула свою першу перемогу на Чемпіонаті Світу, здолавши у напруженому фіналі чинних чемпіонів з рахунком 3:2.</p>
                    <p>Емоційний репортаж з вирішального матчу. Гра тримала в напрузі до останньої хвилини. Після нічиєї 2:2 в основний час, долю матчу вирішив блискучий гол, забитий у додатковий час.</p>
                    <p>Тренер команди у післяматчевому інтерв'ю не стримував сліз: "Ми йшли до цього роками. Це перемога для всієї країни, для кожного вболівальника, хто вірив у нас до кінця".</p>
                    <p>Вулиці міст вибухнули святкуваннями, що тривали до самого ранку. Ця перемога – символ незламності духу та неймовірної командної роботи.</p>
                """,
                "status": "published",
                "views_count": 3150,
            }
        )
        article4 = article_repo.create(
            {
                "author_id": author4.id,
                "category_id": cat_economy.id,
                "title": "Економічний прогноз на наступний квартал",
                "content": """
                    <p>Аналітики прогнозують помірне зростання ВВП на рівні 1.5% у наступному кварталі, незважаючи на глобальну нестабільність. Основними драйверами росту залишаються аграрний сектор та IT-індустрія.</p>
                    <p>Однак, існують значні ризики:</p>
                    <ul>
                        <li><strong>Інфляція:</strong> Очікується, що інфляційний тиск збережеться через високі ціни на енергоносії.</li>
                        <li><strong>Логістика:</strong> Проблеми з ланцюгами постачання продовжують впливати на промислове виробництво.</li>
                    </ul>
                    <p>Національний банк, ймовірно, утримається від різкого підвищення облікової ставки, намагаючись знайти баланс між стимулюванням економіки та контролем над інфляцією. Бізнесу рекомендується диверсифікувати ризики та оптимізувати операційні витрати.</p>
                """,
                "status": "published",
                "views_count": 980,
            }
        )
        article5 = article_repo.create(
            {
                "author_id": author5.id,
                "category_id": cat_culture.id,
                "title": "Цифрове мистецтво: як NFT змінює світ",
                "content": """
                    <p>Ще кілька років тому термін NFT (Non-Fungible Token) був відомий лише вузькому колу ентузіастів. Сьогодні цифрове мистецтво, продане за мільйони доларів, шокує традиційний арт-ринок.</p>
                    <p>Ми пояснюємо, що таке NFT простими словами і чому це важливо не лише для художників, але й для музикантів, письменників та навіть гейм-індустрії.</p>
                    <p>Це не просто "картинки в інтернеті". Технологія блокчейн дозволяє вперше в історії надійно закріпити право власності на цифровий об'єкт, що відкриває неймовірні можливості для креаторів. Разом з тим, існують і проблеми: високе енергоспоживання, ризики спекуляцій та юридичні невизначеності.</p>
                    <p><i>(Ця стаття наразі знаходиться у статусі "чернетка" і невидима для звичайних користувачів.)</i></p>
                """,
                "status": "draft",
                "is_exclusive": True,
                "views_count": 150,
            }
        )
        article6 = article_repo.create(
            {
                "author_id": author1.id,
                "category_id": cat_politics.id,
                "title": "Аналіз законопроєкту про медіа",
                "content": """
                    <p>Новий законопроєкт про медіа викликав бурхливі дебати у суспільстві та парламенті. Документ пропонує суттєво змінити правила гри для телеканалів, онлайн-видань та соціальних мереж.</p>
                    <p>Прихильники законопроєкту наголошують на необхідності боротьби з дезінформацією та підвищенні прозорості медіавласності. Вони зазначають, що чинне законодавство безнадійно застаріло і не відповідає викликам цифрової епохи.</p>
                    <p>З іншого боку, критики та медійні організації висловлюють занепокоєння щодо можливих ризиків для свободи слова. Вони вказують на розмиті формулювання та надмірні повноваження, які може отримати регулятор.</p>
                    <p>Ключові зміни та можливі наслідки для свободи слова аналізує наш політичний оглядач.</p>
                """,
                "status": "published",
                "views_count": 750,
            }
        )

        # --- ВЕЛИКА СТАТТЯ 3 ---
        article7 = article_repo.create(
            {
                "author_id": author2.id,
                "category_id": cat_tech.id,
                "title": "Новий квантовий комп'ютер: прорив чи міф?",
                "content": """
                    <p><strong>Ексклюзивний матеріал.</strong></p>
                    <p>Технологічний гігант X-Corp оголосив про створення революційного квантового процесора "Phoenix", що налічує 10,000 стабільних кубітів. Заяви компанії обіцяють прорив у медицині, криптографії та матеріалознавстві, скоротивши час на обчислення з десятиліть до кількох годин.</p>
                    
                    <h2>Що таке квантові обчислення?</h2>
                    <p>На відміну від класичних комп'ютерів, що використовують біти (0 або 1), квантові комп'ютери використовують кубіти. Завдяки принципам квантової механіки, таким як суперпозиція та заплутаність, кубіти можуть одночасно представляти 0 і 1. Це дозволяє квантовим комп'ютерам виконувати паралельні обчислення у масштабах, недосяжних для найпотужніших суперкомп'ютерів.</p>
                    <p>Наприклад, розшифровка сучасних криптографічних ключів зайняла б у класичного комп'ютера тисячі років. Квантовий комп'ютер, теоретично, міг би зробити це за кілька днів.</p>
                    
                    <h2>Проблема стабільності</h2>
                    <p>Але чи все так однозначно? Ми розбираємось у складній технології та її перспективах. Довгий час квантові обчислення перебували на експериментальній стадії. Головна проблема – "декогеренція", тобто надзвичайна чутливість кубітів до зовнішнього середовища (температури, вібрацій), що призводить до помилок в обчисленнях.</p>
                    <p>X-Corp стверджує, що їхній новий процесор "Phoenix" використовує інноваційну систему лазерного охолодження та корекції помилок, що дозволяє підтримувати когерентність кубітів у 100 разів довше, ніж у конкурентів.</p>
                    
                    <h2>Скепсис наукової спільноти</h2>
                    <p>Незалежні експерти закликають ставитися до заяв X-Corp з обережністю. "Ми вже чули гучні заяви раніше, - каже доктор Єва Райлі, фізик з MIT. - 'Квантова перевага' часто виявляється маркетинговим ходом для залучення інвестицій. Нам потрібні рецензовані наукові статті та незалежна перевірка результатів".</p>
                    <p>Критики вказують, що навіть якщо заявлена кількість кубітів правдива, незрозуміло, наскільки ефективно вони заплутані між собою і який реальний відсоток коректних операцій.</p>
                    
                    <p>Проте, якщо хоча б частина заявлених характеристик правдива, ми стоїмо на порозі нової технологічної ери. Вплив на криптографію буде негайним, що змусить уряди та корпорації по всьому світу терміново переглядати свої системи безпеки.</p>
                """,
                "status": "published",
                "is_exclusive": True,
                "views_count": 1900,
            }
        )

        # --- ВЕЛИКА СТАТТЯ 4 ---
        article8 = article_repo.create(
            {
                "author_id": author5.id,
                "category_id": cat_travel.id,
                "title": "Топ-5 недооцінених місць в Карпатах (та як до них дістатися)",
                "content": """
                    <p>Коли мова заходить про Карпати, більшість згадує Буковель, Яремче чи Говерлу. Безумовно, це прекрасні місця, але через їхню популярність там часто буває гамірно і дорого. Але українські гори приховують безліч менш відомих, але не менш чарівних місць.</p>
                    <p>Відкрийте для себе приховані перлини українських гір. Наш тревел-блогер Софія Мельник підготувала гід по локаціях, де можна насолодитися тишею, неймовірними краєвидами та справжньою автентикою без натовпів туристів.</p>
                    
                    <h2>1. Озеро Синевир на світанку</h2>
                    <p><strong>Чому воно недооцінене:</strong> "Але ж всі знають про Синевир!" - скажете ви. Так, але 99% туристів приїжджають туди автобусами об 11 ранку, коли озеро оточене ярмарком та галасом. Справжня магія – зустріти там світанок.</p>
                    <p><strong>Як побачити:</strong> Забудьте про денні екскурсії. Зупиніться на ніч у селі Синевирська Поляна (яке знаходиться найближче до озера). Встаньте о 4-й ранку і пройдіть 20-30 хвилин пішки до озера. Ви будете винагороджені абсолютною тишею, дзеркальною водою та туманом, що повільно підіймається над "Морським оком". Це містичний досвід.</p>
                    
                    <h2>2. Полонина Боржава</h2>
                    <p><strong>Чому вона недооцінена:</strong> Це один з найдовших та наймальовничіших хребтів Карпат, але більшість туристів доїжджають лише до водоспаду Шипіт біля його підніжжя. Сама ж полонина – це гігантські простори, вкриті чорницею, з панорамними видами на 360 градусів.</p>
                    <p><strong>Як побачити:</strong> Найпростіший шлях – піднятися на крісельному підйомнику з села Пилипець або Ізки. Звідти ви можете годинами гуляти по вершинах хребта (гори Гемба, Великий Верх), майже не набираючи висоту. Це ідеальне місце для легкого трекінгу з "космічними" пейзажами.</p>
                    
                    <h2>3. Обсерваторія на горі Піп Іван Чорногорський</h2>
                    <p><strong>Чому вона недооцінена:</strong> Це нелегкий маршрут, тому "випадкових" туристів тут не буває. Це третій за висотою пік України (2028 м), на вершині якого стоять вражаючі руїни польської астрономічної обсерваторії "Білий Слон", збудованої у 1938 році.</p>
                    <p><strong>Як побачити:</strong> Це повноцінний похід, що вимагає підготовки. Класичний маршрут починається з села Дземброня і займає 2 дні з ночівлею у наметах або біля озера Марічейка. Нагородою будуть неймовірні краєвиди Чорногори та відчуття себе дослідником на руїнах покинутої "фортеці".</p>
                    
                    <h2>4. Село Криворівня</h2>
                    <p><strong>Чому воно недооцінене:</strong> Це не про гори, це про дух. Це село називають "неофіційною столицею Гуцульщини". На початку 20-го століття тут жили і творили Іван Франко, Леся Українка, Михайло Коцюбинський (саме тут він написав "Тіні забутих предків").</p>
                    <p><strong>Як побачити:</strong> Приїдьте сюди не на годину, а хоча б на день. Відвідайте Музей-садибу Франка, Хату-гражду та обов'язково прогуляйтеся вздовж річки Чорний Черемош. Тут зберігся унікальний мікроклімат та автентична дерев'яна архітектура.</p>
                    
                    <h2>5. Таємничі "скелі Довбуша" (біля Яремче)</h2>
                    <p><strong>Чому вони недооцінені:</strong> Не плутайте з великим та популярним скельно-печерним комплексом біля села Бубнище. "Стежка Довбуша" у Яремче – це короткий, але надзвичайно мальовничий маршрут, що починається прямо з міста. Це лабіринт з гігантських каменів, вкритих мохом, у смерековому лісі, що пахне хвoєю та вологою.</p>
                    <p><strong>Як побачити:</strong> Вхід на стежку знаходиться біля сувенірного ринку в Яремче. Це ідеальний варіант для короткої (1.5-2 години) прогулянки, щоб відчути велич природи, не відходячи далеко від цивілізації.</p>
                """,
                "status": "published",
                "views_count": 2200,
            }
        )
        article9 = article_repo.create(
            {
                "author_id": author4.id,
                "category_id": cat_economy.id,
                "title": "Вплив інфляції на малий бізнес",
                "content": """
                    <p>Зростання цін – це не просто цифри у звітах. Для малого бізнесу це щоденна боротьба за виживання. Вартість сировини, оренди та логістики зростає, тоді як купівельна спроможність клієнтів падає.</p>
                    <p>Як підприємцям адаптуватися до нових економічних реалій? Наш фінансовий аналітик зібрав практичні поради:</p>
                    <ul>
                        <li><strong>Перегляд ціноутворення:</strong> Не бійтеся підвищувати ціни, але робіть це обґрунтовано та прозоро для клієнтів.</li>
                        <li><strong>Оптимізація запасів:</strong> Уникайте "заморожування" грошей у товарах, що довго лежать на складі.</li>
                        <li><strong>Енергоефективність:</strong> Інвестиції у сучасне обладнання чи утеплення можуть суттєво зекономити кошти в довгостроковій перспективі.</li>
                        <li><strong>Диверсифікація постачальників:</strong> Не залежати від одного партнера – ключове правило в часи нестабільності.</li>
                    </ul>
                """,
                "status": "published",
                "views_count": 1100,
            }
        )
        article10 = article_repo.create(
            {
                "author_id": author3.id,
                "category_id": cat_sport.id,
                "title": "Огляд тенісного турніру: нові зірки",
                "content": """
                    <p>Цьогорічний відкритий чемпіонат з тенісу запам'ятається не лише поверненням легенд, але й неймовірним проривом молодих талантів. Аналіз виступів на міжнародній арені показує зміну поколінь.</p>
                    <p>19-річний дебютант, який починав з кваліфікації, дійшов до півфіналу, здолавши трьох гравців з топ-10. Його агресивний стиль та дивовижна психологічна стійкість вразили експертів.</p>
                    <p>Водночас, у жіночій сітці ми побачили фінал двох гравчинь, яким ще немає 22 років. Це свідчить про те, що ера домінування "великої трійки" добігає кінця, і на нас чекає нова, непередбачувана епоха у світовому тенісі.</p>
                """,
                "status": "published",
                "views_count": 1350,
            }
        )
        print("Статті створено.")

        # --- 7. Створення коментарів ---
        print("Створення коментарів...")
        comment_repo.create(
            {
                "article_id": article1.id,
                "user_id": free_user.id,
                "text": "Дуже цікава стаття! Дякую за глибокий аналіз.",
            }
        )
        comment_repo.create(
            {
                "article_id": article1.id,
                "user_id": premium_user.id,
                "text": "Написано добре, але не згоден з пунктом про енергетичну безпеку. Мені здається, тут є ризики.",
            }
        )
        comment_repo.create(
            {
                "article_id": article3.id,
                "user_id": premium_user.id,
                "text": "Це була неймовірна гра! Я був на стадіоні, емоції просто зашкалюють! Наші хлопці молодці!",
            }
        )
        comment_repo.create(
            {
                "article_id": article4.id,
                "user_id": free_user.id,
                "text": "Корисна інформація, дякую. Як раз думав, що робити з цінами у своїй кав'ярні.",
            }
        )
        comment_repo.create(
            {
                "article_id": article8.id,
                "user_id": free_user.id,
                "text": "Був на Боржаві минулого літа, це дійсно космос! Чорниці можна їсти просто з куща годинами :)",
            }
        )
        comment_repo.create(
            {
                "article_id": article8.id,
                "user_id": premium_user.id,
                "text": "Дякую за ідеї! Про Криворівню не знав, обов'язково заїду наступного разу.",
            }
        )
        print("Коментарі створено.")

        # --- 8. Створення рекламних оголошень ---
        print("Створення рекламних оголошень...")
        ad_repo.create(
            {
                "title": "Знижки на техніку",
                "content": "Оновіть свій ноутбук! Знижки до -30% на всю лінійку XPS.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 5000,
                "clicks_count": 150,
            }
        )
        ad_repo.create(
            {
                "title": "Курс з Python",
                "content": "Станьте розробником за 6 місяців. Гарантія працевлаштування.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 12000,
                "clicks_count": 250,
            }
        )
        ad_repo.create(
            {
                "title": "Доставка їжі 'Смаколик'",
                "content": "Безкоштовна доставка першого замовлення за промокодом 'NEWSAPP'.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 8000,
                "clicks_count": 180,
            }
        )
        ad_repo.create(
            {
                "title": "Нова колекція одягу",
                "content": "Стильні речі для вашого осіннього гардеробу.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 9500,
                "clicks_count": 210,
            }
        )
        ad_repo.create(
            {
                "title": "Онлайн-кінотеатр 'KinoGo'",
                "content": "Дивіться ексклюзивні прем'єри фільмів у високій якості.",
                "ad_type": "video",
                "is_active": True,
                "impressions_count": 25000,
                "clicks_count": 1200,
            }
        )
        ad_repo.create(
            {
                "title": "Квитки на концерт 'Ocean'",
                "content": "Не пропустіть виступ улюбленого гурту у вашому місті!",
                "ad_type": "popup",
                "is_active": True,
                "impressions_count": 3000,
                "clicks_count": 450,
            }
        )
        ad_repo.create(
            {
                "title": "Страхування авто 'Надійно'",
                "content": "Надійний захист для вашого автомобіля. Розрахуйте вартість онлайн.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 6000,
                "clicks_count": 90,
            }
        )
        ad_repo.create(
            {
                "title": "Курси англійської 'SpeakUp'",
                "content": "Вивчай мову з носіями. Перший урок безкоштовно.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 11000,
                "clicks_count": 320,
            }
        )
        ad_repo.create(
            {
                "title": "Спортивне харчування",
                "content": "Все для ваших тренувань. Протеїни, вітаміни та аксесуари.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 7000,
                "clicks_count": 280,
            }
        )
        ad_repo.create(
            {
                "title": "Подорож до Єгипту",
                "content": "Гарячі тури за найкращими цінами! Від $499 на тиждень.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 15000,
                "clicks_count": 600,
            }
        )
        ad_repo.create(
            {
                "title": "Новий смартфон 'Pixel 9'",
                "content": "Оновіть свій гаджет сьогодні. Камера зі штучним інтелектом.",
                "ad_type": "video",
                "is_active": True,
                "impressions_count": 18000,
                "clicks_count": 950,
            }
        )
        ad_repo.create(
            {
                "title": "Юридичні послуги 'Право'",
                "content": "Професійна консультація для вашого бізнесу. Відкриття ФОП.",
                "ad_type": "sidebar",
                "is_active": False,  # Неактивна реклама для тестування
                "impressions_count": 2000,
                "clicks_count": 15,
            }
        )
        ad_repo.create(
            {
                "title": "Фітнес-клуб 'SportLife'",
                "content": "Абонемент на рік зі знижкою 50% лише до кінця місяця!",
                "ad_type": "popup",
                "is_active": True,
                "impressions_count": 4500,
                "clicks_count": 700,
            }
        )
        ad_repo.create(
            {
                "title": "Ремонт квартир 'Майстер'",
                "content": "Якісно, швидко та з гарантією. Безкоштовний виїзд замірника.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 5500,
                "clicks_count": 110,
            }
        )

        # --- Додаткові оголошення ---

        ad_repo.create(
            {
                "title": "Книгарня 'Літера'",
                "content": "Нові надходження світових бестселерів. Замовляйте онлайн.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 8500,
                "clicks_count": 310,
            }
        )
        ad_repo.create(
            {
                "title": "Вебінар з маркетингу",
                "content": "Дізнайтеся, як просувати свій бренд у 2025 році. Реєстрація відкрита.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 6200,
                "clicks_count": 420,
            }
        )
        ad_repo.create(
            {
                "title": "Кава 'Gourmet Beans'",
                "content": "Свіжообсмажена арабіка з доставкою додому.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 4300,
                "clicks_count": 130,
            }
        )
        ad_repo.create(
            {
                "title": "Новий ігровий монітор 'ViewMax'",
                "content": "4K, 144Hz. Повне занурення у гру.",
                "ad_type": "video",
                "is_active": True,
                "impressions_count": 16000,
                "clicks_count": 880,
            }
        )
        ad_repo.create(
            {
                "title": "Підпишіться на нашу розсилку!",
                "content": "Отримуйте ексклюзивні статті та знижки першими.",
                "ad_type": "popup",
                "is_active": True,
                "impressions_count": 10000,
                "clicks_count": 1500,
            }
        )
        ad_repo.create(
            {
                "title": "Еко-товари 'Zeleno'",
                "content": "Все для свідомого споживання: від косметики до побутової хімії.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 7100,
                "clicks_count": 190,
            }
        )
        ad_repo.create(
            {
                "title": "Ветеринарна клініка 'ДоброЛап'",
                "content": "Цілодобова допомога вашим улюбленцям. Консультація онлайн.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 3900,
                "clicks_count": 120,
            }
        )
        ad_repo.create(
            {
                "title": "Йога-студія 'Гармонія'",
                "content": "Знайдіть свій внутрішній баланс. Пробне заняття – 100 грн.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 5100,
                "clicks_count": 220,
            }
        )
        ad_repo.create(
            {
                "title": "Хмарне сховище 'CloudDrive'",
                "content": "Надійне зберігання ваших файлів. 1ТБ за 99 грн/міс.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 13000,
                "clicks_count": 410,
            }
        )
        ad_repo.create(
            {
                "title": "Новий альбом гурту 'Stray'",
                "content": "Слухайте на всіх стрімінгових платформах!",
                "ad_type": "video",
                "is_active": True,
                "impressions_count": 22000,
                "clicks_count": 1100,
            }
        )
        ad_repo.create(
            {
                "title": "Дитячі іграшки 'Joy'",
                "content": "Розвиваючі ігри для дітей будь-якого віку.",
                "ad_type": "banner",
                "is_active": True,
                "impressions_count": 6800,
                "clicks_count": 160,
            }
        )
        ad_repo.create(
            {
                "title": "Зимові шини 'NordTire'",
                "content": "Готуйте авто до зими! Знижки на монтаж.",
                "ad_type": "banner",
                "is_active": False,  # Ще одна неактивна
                "impressions_count": 4000,
                "clicks_count": 50,
            }
        )
        ad_repo.create(
            {
                "title": "Курси фотографії",
                "content": "Навчіться робити професійні знімки на свій смартфон.",
                "ad_type": "inline",
                "is_active": True,
                "impressions_count": 5300,
                "clicks_count": 300,
            }
        )
        ad_repo.create(
            {
                "title": "Оренда офісів 'WorkSpace'",
                "content": "Сучасні офісні рішення для вашого бізнесу. Від $200/міс.",
                "ad_type": "sidebar",
                "is_active": True,
                "impressions_count": 9100,
                "clicks_count": 230,
            }
        )
        ad_repo.create(
            {
                "title": "Зубна клініка 'Smile'",
                "content": "Професійна чистка зубів зі знижкою 20%.",
                "ad_type": "popup",
                "is_active": True,
                "impressions_count": 2800,
                "clicks_count": 350,
            }
        )

        print("Рекламні оголошення створено.")
        db_session.close()


if __name__ == "__main__":
    print("Запуск скрипту для наповнення бази даних...")
    seed_database()
    print("\nУспішно завершено! База даних готова до використання.")
